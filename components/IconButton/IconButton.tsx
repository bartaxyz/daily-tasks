import { useRef } from "react";
import { PressableProps, View } from "react-native";
import { useActive, useHover } from "react-native-web-hooks";
import styled, { useTheme } from "styled-components/native";
import { Svg, Path } from "react-native-svg";
import { Typography } from "../Typography";
import { rgba } from "polished";

export interface IconButtonProps extends PressableProps {
  label: string;
  icon: keyof typeof icons;
}

const icons = {
  archive:
    "M9.1748 21.8809H18.8164C20.6357 21.8809 21.6289 20.9141 21.6289 19.1035V10.5957C22.4551 10.376 22.9209 9.67285 22.9209 8.69727V7.42285C22.9209 6.22754 22.2266 5.4541 21.0225 5.4541H6.97754C5.81738 5.4541 5.07031 6.22754 5.07031 7.42285V8.69727C5.07031 9.67285 5.53613 10.3672 6.37109 10.5957V19.1035C6.37109 20.9141 7.36426 21.8809 9.1748 21.8809ZM7.31152 9.05762C6.90723 9.05762 6.73145 8.87305 6.73145 8.46875V7.65137C6.73145 7.24707 6.90723 7.0625 7.31152 7.0625H20.6973C21.0928 7.0625 21.2598 7.24707 21.2598 7.65137V8.46875C21.2598 8.87305 21.0928 9.05762 20.6973 9.05762H7.31152ZM9.2627 20.2021C8.52441 20.2021 8.12012 19.8066 8.12012 19.0596V10.666H19.8711V19.0596C19.8711 19.8066 19.4668 20.2021 18.7373 20.2021H9.2627ZM11.1699 14.2607H16.8301C17.252 14.2607 17.5508 13.9531 17.5508 13.5225V13.2412C17.5508 12.8105 17.252 12.5205 16.8301 12.5205H11.1699C10.748 12.5205 10.4492 12.8105 10.4492 13.2412V13.5225C10.4492 13.9531 10.748 14.2607 11.1699 14.2607Z",
  sunset:
    "M14 7.73926C14.4307 7.73047 14.7822 7.37012 14.7822 6.88672V4.85645C14.7822 4.37305 14.4307 4.0127 14 4.0127C13.5693 4.0127 13.2178 4.37305 13.2178 4.85645V6.88672C13.2178 7.37012 13.5693 7.74805 14 7.73926ZM18.5352 9.62012C18.8428 9.91895 19.3525 9.91016 19.6953 9.57617L21.1279 8.13477C21.4795 7.79199 21.4707 7.29102 21.1631 6.9834C20.873 6.67578 20.3633 6.67578 20.0205 7.02734L18.5791 8.45996C18.2363 8.80273 18.2275 9.32129 18.5352 9.62012ZM9.45605 9.62012C9.76367 9.3125 9.75488 8.80273 9.4209 8.45996L7.97949 7.02734C7.63672 6.67578 7.13574 6.68457 6.82812 6.9834C6.52051 7.29102 6.52051 7.79199 6.86328 8.13477L8.30469 9.57617C8.64746 9.91016 9.15723 9.92773 9.45605 9.62012ZM5.78223 18.0752H23.5361C23.8789 18.0752 24.1426 17.8203 24.1426 17.4775C24.1426 17.1436 23.8789 16.8887 23.5361 16.8887H17.9199C18.4912 16.1152 18.8164 15.166 18.8164 14.1553C18.8164 11.501 16.6367 9.33008 14 9.33008C11.3633 9.33008 9.18359 11.501 9.18359 14.1553C9.18359 15.166 9.50879 16.1152 10.0801 16.8887H5.78223C5.44824 16.8887 5.18457 17.1436 5.18457 17.4775C5.18457 17.8203 5.44824 18.0752 5.78223 18.0752ZM10.7568 14.1553C10.7568 12.3711 12.2246 10.9121 14 10.9121C15.7754 10.9121 17.2344 12.3711 17.2344 14.1553C17.2344 15.3066 16.6191 16.3262 15.7051 16.8887H12.2949C11.3809 16.3262 10.7568 15.3066 10.7568 14.1553ZM4.70117 14.6738H6.73145C7.21484 14.6738 7.59277 14.3223 7.58398 13.8916C7.5752 13.4609 7.21484 13.1094 6.73145 13.1094H4.70117C4.21777 13.1094 3.85742 13.4609 3.85742 13.8916C3.85742 14.3223 4.22656 14.6738 4.70117 14.6738ZM21.2686 14.6738H23.2988C23.7822 14.6826 24.1426 14.3223 24.1426 13.8916C24.1426 13.4609 23.7822 13.1094 23.2988 13.1094H21.2686C20.7852 13.1094 20.4072 13.4609 20.416 13.8916C20.4248 14.3223 20.7852 14.6738 21.2686 14.6738ZM4.46387 21.4502H22.209C22.5518 21.4502 22.8154 21.1953 22.8154 20.8525C22.8154 20.5186 22.5518 20.2637 22.209 20.2637H4.46387C4.12109 20.2637 3.85742 20.5186 3.85742 20.8525C3.85742 21.1953 4.12109 21.4502 4.46387 21.4502ZM5.78223 24.8252H23.5361C23.8789 24.8252 24.1426 24.5703 24.1426 24.2275C24.1426 23.8936 23.8789 23.6387 23.5361 23.6387H5.78223C5.44824 23.6387 5.18457 23.8936 5.18457 24.2275C5.18457 24.5703 5.44824 24.8252 5.78223 24.8252Z",
  trash:
    "M9.96582 22.7686H18.043C19.3965 22.7686 20.2666 21.9512 20.3369 20.5977L20.9258 7.94141H21.8926C22.3408 7.94141 22.6836 7.58984 22.6836 7.15039C22.6836 6.71094 22.332 6.37695 21.8926 6.37695H17.9902V5.05859C17.9902 3.70508 17.1289 2.91406 15.6611 2.91406H12.3213C10.8535 2.91406 9.99219 3.70508 9.99219 5.05859V6.37695H6.10742C5.66797 6.37695 5.31641 6.71973 5.31641 7.15039C5.31641 7.59863 5.66797 7.94141 6.10742 7.94141H7.07422L7.66309 20.5977C7.7334 21.96 8.59473 22.7686 9.96582 22.7686ZM11.6357 5.1377C11.6357 4.68945 11.9521 4.39941 12.4355 4.39941H15.5469C16.0303 4.39941 16.3467 4.68945 16.3467 5.1377V6.37695H11.6357V5.1377ZM10.1416 21.1953C9.6582 21.1953 9.30664 20.835 9.28027 20.3164L8.69141 7.94141H19.2822L18.7109 20.3164C18.6934 20.8438 18.3506 21.1953 17.8496 21.1953H10.1416ZM11.4072 19.7803C11.7852 19.7803 12.0225 19.543 12.0137 19.1914L11.75 9.99805C11.7412 9.64648 11.4951 9.41797 11.1348 9.41797C10.7656 9.41797 10.5283 9.65527 10.5371 10.0068L10.8008 19.2002C10.8096 19.5518 11.0557 19.7803 11.4072 19.7803ZM14 19.7803C14.3691 19.7803 14.624 19.5518 14.624 19.2002V10.0068C14.624 9.65527 14.3691 9.41797 14 9.41797C13.6309 9.41797 13.3848 9.65527 13.3848 10.0068V19.2002C13.3848 19.5518 13.6309 19.7803 14 19.7803ZM16.5928 19.7891C16.9443 19.7891 17.1904 19.5518 17.1992 19.2002L17.4629 10.0068C17.4717 9.65527 17.2344 9.42676 16.8652 9.42676C16.5049 9.42676 16.2588 9.65527 16.25 10.0068L15.9863 19.2002C15.9775 19.543 16.2148 19.7891 16.5928 19.7891Z",
};

export const IconButton: React.FC<IconButtonProps> = ({
  label,
  icon,
  ...props
}) => {
  const ref = useRef<View>(null);
  const hover = useHover(ref);
  const active = useActive(ref);
  const { colors } = useTheme();

  const foreground =
    active || hover ? colors.primary : colors.iconButton.foreground;

  return (
    <Root ref={ref} hover={hover} active={active} {...props}>
      <Svg width="28" height="28" viewBox="0 0 28 28" fill="none">
        <Path d={icons[icon]} fill={foreground} />
      </Svg>

      <Typography.Body color={foreground}>{label}</Typography.Body>
    </Root>
  );
};

interface RootProps extends PressableProps {
  hover: boolean;
  active: boolean;
}
const Root = styled.Pressable<RootProps>`
  justify-content: center;
  align-items: center;
  min-width: 80px;
  padding: 8px;
  border-radius: 8px;
  background: ${({ theme, hover, active }) =>
    active
      ? rgba(theme.colors.primary, 0.2)
      : hover
      ? rgba(theme.colors.primary, 0.1)
      : theme.colors.iconButton.background};
`;
